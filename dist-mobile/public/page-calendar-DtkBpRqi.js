import{j as e,C as Ce,P as Se,c as T,u as Ee,a as Me,b as Fe,d as Te,f as se,e as ze,B as p,g as ae,h as ne,D as A,i as $,k as H,l as O,m as R,L as E,n as Be,o as Ie}from"./page-aichat-CKORiKyt.js";import{useState as N,useEffect as re,useCallback as Le,useMemo as K}from"react";import{u as Z}from"./vendor-router-D-FESdbc.js";import{L as Ye,h as oe,B as de,g as J,k as Ae,M as $e,i as He,j as Oe,V as Re,c as Pe,X as V,d as Ue,e as We,z as q,C as le,S as Ke,b as Ve,a as qe,W as Je,f as Ze,Y as Ge,n as Qe}from"./vendor-misc-BE9IcyzX.js";import{S as Xe}from"./vendor-ui-BltWm47c.js";import{j as _e}from"./vendor-firebase-BDm9EHMM.js";import{t as f}from"./vendor-toast-CdQ6zwVl.js";const et=[{id:"dashboard",label:"Dashboard",path:"/",icon:Ye},{id:"calendar",label:"Kalender",path:"/calendar",icon:oe},{id:"reminders",label:"Erinnerungen",path:"/reminders",icon:de},{id:"finance",label:"Finanzen",path:"/finance",icon:J},{id:"shopping",label:"Einkaufsliste",path:"/shopping",icon:Ae},{id:"chat",label:"Assistent",path:"/aichat",icon:$e},{id:"bills",label:"Rechnungen",path:"/bills",icon:He},{id:"documents",label:"Dokumente",path:"/documents",icon:Oe}];function tt({currentPath:s,customActions:n}){const[a,c]=Z(),[d,u]=N(!1),w=n||et,j=s||a;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed top-14 left-0 right-0 z-30 px-4 py-3 flex flex-row gap-3 justify-center safe-top overflow-x-auto scrollbar-hide",style:{paddingTop:"max(0.75rem, env(safe-area-inset-top))"},children:[e.jsx("button",{onClick:()=>u(!0),className:"w-12 h-12 flex-shrink-0 rounded-full bg-background hover:bg-muted border border-border transition-colors flex items-center justify-center active:scale-95 shadow-sm","aria-label":"Menü öffnen","aria-expanded":d,"aria-controls":"sidebar-menu",title:"Menü öffnen",children:e.jsx(Re,{className:"w-5 h-5 text-foreground"})}),w.map(l=>{const C=l.icon,r=j===l.path;return e.jsx("button",{onClick:()=>{c(l.path)},className:`w-12 h-12 flex-shrink-0 rounded-full border transition-colors flex items-center justify-center active:scale-95 shadow-sm ${r?"bg-primary text-primary-foreground border-primary":"bg-background hover:bg-muted border-border"}`,"aria-label":l.label,title:l.label,children:e.jsx(C,{className:"w-5 h-5"})},l.id)})]}),e.jsx(Ce,{open:d,onClose:()=>u(!1)})]})}function st({children:s,title:n="Nexo",showSidebar:a=!1,showQuickActions:c=!1,quickActions:d=[],currentChatId:u,onSelectChat:w,onNewChat:j,hideQuickActions:l=!1}){const[C]=Z();return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(Se,{title:n,showSidebar:a,showQuickActions:c,quickActions:d,currentChatId:u,onSelectChat:w,onNewChat:j}),!l&&e.jsx(tt,{currentPath:C}),e.jsx("main",{className:"flex-1 overflow-y-auto",style:{paddingTop:l?"3.5rem":"7rem",touchAction:"pan-y"},children:e.jsx("div",{className:"mobile-container py-4",children:s})})]})}function at({className:s,...n}){return e.jsx("div",{"data-slot":"skeleton",className:T("bg-accent animate-pulse rounded-md",s),...n})}const nt=Pe("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ie({className:s,variant:n,asChild:a=!1,...c}){const d=a?Xe:"span";return e.jsx(d,{"data-slot":"badge",className:T(nt({variant:n}),s),...c})}function ut(s){if(!s||!s.includes("T"))throw new Error("Invalid datetime-local format. Expected: YYYY-MM-DDTHH:mm");const[n,a]=s.split("T"),[c,d,u]=n.split("-").map(Number),[w,j]=a?a.split(":").map(Number):[0,0];return new Date(c,d-1,u,w,j,0,0)}function xt(s,n){if(!s)return"N/A";try{let a;if(s?.toDate&&typeof s.toDate=="function")a=s.toDate();else if(typeof s=="string")a=new Date(s);else if(s instanceof Date)a=s;else return"N/A";if(isNaN(a.getTime()))return"N/A";const c=a.getDate().toString().padStart(2,"0"),d=(a.getMonth()+1).toString().padStart(2,"0"),u=a.getFullYear();return n?.includeTime,`${c}.${d}.${u}`}catch{return"N/A"}}function P(s){if(!s)return P(new Date);try{let n;if(s?.toDate&&typeof s.toDate=="function")n=s.toDate();else if(typeof s=="string")n=new Date(s);else if(s instanceof Date)n=s;else return P(new Date);if(isNaN(n.getTime()))return P(new Date);const a=n.getFullYear(),c=(n.getMonth()+1).toString().padStart(2,"0"),d=n.getDate().toString().padStart(2,"0"),u=n.getHours().toString().padStart(2,"0"),w=n.getMinutes().toString().padStart(2,"0");return`${a}-${c}-${d}T${u}:${w}`}catch{return P(new Date)}}function M(s){if(!s)return"";try{let n;if(typeof s=="object"&&s!==null&&"toDate"in s&&typeof s.toDate=="function")n=s.toDate();else if(s instanceof Date)n=s;else if(typeof s=="string"){if(!s.includes("T")&&s.match(/^\d{4}-\d{2}-\d{2}$/))return s;n=new Date(s)}else n=new Date(s);if(isNaN(n.getTime()))return"";const a=n.getFullYear(),c=String(n.getMonth()+1).padStart(2,"0"),d=String(n.getDate()).padStart(2,"0");return`${a}-${c}-${d}`}catch{return""}}function k(s){if(!(s instanceof Date)||isNaN(s.getTime()))throw new Error("Invalid date: must be a valid Date object");const n=s.getFullYear(),a=String(s.getMonth()+1).padStart(2,"0"),c=String(s.getDate()).padStart(2,"0");return`${n}-${a}-${c}`}function ht(){const{t:s}=Ee(),[,n]=Z(),[a,c]=N(new Date),[d,u]=N([]),[w,j]=N(!0),[l,C]=N(null),[r,ce]=N(null),[me,z]=N(!1),[ue,S]=N(!1),[xe,B]=N(!1),[he,I]=N(!1);Me();const{settings:pe}=Fe(),G=pe?.location||"Zurich, CH",Q=l?new Date(l.getFullYear(),l.getMonth(),l.getDate()):null,{data:h,isLoading:X,error:U}=Te(Q,G);re(()=>{},[l,Q,G,h,X,U]);const L=Le(async()=>{try{if(j(!0),!se){console.error("[Calendar] Firebase functions not available"),f.error("Firebase nicht initialisiert"),u([]);return}if(!ze.currentUser){console.warn("[Calendar] User not authenticated"),u([]);return}const t=_e(se,"getCalendarEvents"),i=new Date(a.getFullYear(),a.getMonth()-1,1),m=new Date(a.getFullYear(),a.getMonth()+2,0);try{const y=(await t({startDate:i.toISOString(),endDate:m.toISOString()})).data.events||[],x=typeof globalThis.process<"u"&&!1,v=y.map(b=>{const D=M(b.date);return D?{...b,date:D}:(console.warn("[Calendar] Event with invalid date skipped:",b),null)}).filter(b=>b!==null);u(v)}catch(o){console.error("[Calendar] API Error:",{message:o?.message,code:o?.code,details:o?.details,stack:o?.stack}),o?.code==="unauthenticated"||o?.message?.includes("UNAUTHORIZED")?f.error("Bitte anmelden"):o?.code==="unavailable"||o?.message?.includes("network")?f.error("Netzwerkfehler - Bitte erneut versuchen"):f.error(`Fehler beim Laden der Events: ${o?.message||"Unbekannter Fehler"}`),u([])}}catch(t){console.error("[Calendar] Unexpected error:",t),f.error("Unerwarteter Fehler beim Laden der Events"),u([])}finally{j(!1)}},[a]);re(()=>{L()},[L]);const fe=["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],ge=["Mo","Di","Mi","Do","Fr","Sa","So"],be=t=>new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),je=t=>{const i=new Date(t.getFullYear(),t.getMonth(),1).getDay();return i===0?6:i-1},ve=K(()=>{const t=be(a),i=je(a),m=[],g=new Date(a.getFullYear(),a.getMonth()-1,0).getDate();for(let x=i-1;x>=0;x--){const v=new Date(a.getFullYear(),a.getMonth()-1,g-x),b=k(v),D=d.filter(F=>M(F.date)===b);m.push({date:v,isCurrentMonth:!1,events:D})}for(let x=1;x<=t;x++){const v=new Date(a.getFullYear(),a.getMonth(),x),b=k(v),D=d.filter(F=>M(F.date)===b);m.push({date:v,isCurrentMonth:!0,events:D})}const y=42-m.length;for(let x=1;x<=y;x++){const v=new Date(a.getFullYear(),a.getMonth()+1,x),b=k(v),D=d.filter(F=>M(F.date)===b);m.push({date:v,isCurrentMonth:!1,events:D})}return m},[a,d]),Ne=()=>{c(new Date(a.getFullYear(),a.getMonth()-1,1))},we=()=>{c(new Date(a.getFullYear(),a.getMonth()+1,1))},ye=()=>{c(new Date)},De=t=>{const i=new Date;return t.toDateString()===i.toDateString()},ke=t=>{const i=new Date(t.getFullYear(),t.getMonth(),t.getDate());C(i),S(!0)},W=t=>{ce(t),z(!0)},_=K(()=>{if(!l)return[];const t=new Date(l.getFullYear(),l.getMonth(),l.getDate()),i=k(t);return d.filter(o=>{if(!o.date)return!1;const g=M(o.date);return g?g===i:!1})},[l,d]),ee=K(()=>{const i=k(new Date);return d.filter(m=>{const o=M(m.date);return o!==""&&o===i})},[d]),Y=t=>{switch(t){case"due":return"bg-pink-500";case"reminder":case"appointment":case"termin":return"bg-orange-500";case"work":return"bg-slate-400";case"vacation":case"frei":return"bg-emerald-400";case"school-holiday":return"bg-sky-400";case"school":return"bg-purple-400";case"hort":return"bg-fuchsia-500";default:return"bg-gray-500"}};return e.jsxs(st,{title:"Kalender",showSidebar:!0,children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>n("/"),className:"fixed top-2 right-2 z-50 h-9 w-9 rounded-full bg-background/95 backdrop-blur-sm border border-border shadow-lg",children:e.jsx(V,{className:"h-4 w-4"})}),e.jsxs("div",{className:"mobile-card mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(p,{variant:"outline",size:"sm",onClick:Ne,className:"h-10 min-h-[44px] px-3",children:e.jsx(Ue,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1 text-center",children:e.jsxs("h2",{className:"text-lg font-semibold",children:[fe[a.getMonth()]," ",a.getFullYear()]})}),e.jsx(p,{variant:"outline",size:"sm",onClick:we,className:"h-10 min-h-[44px] px-3",children:e.jsx(We,{className:"w-5 h-5"})})]}),e.jsx(p,{variant:"outline",size:"sm",onClick:ye,className:"w-full h-10 min-h-[44px]",children:"Heute"})]}),e.jsxs("div",{className:"mobile-card",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:ge.map((t,i)=>e.jsx("div",{className:"text-center text-xs font-medium text-muted-foreground py-2",children:t},i))}),w?e.jsx("div",{className:"grid grid-cols-7 gap-1",children:Array.from({length:42}).map((t,i)=>e.jsx(at,{className:"aspect-square min-h-[44px] rounded-lg"},i))}):e.jsx("div",{className:"grid grid-cols-7 gap-1",children:ve.map((t,i)=>{const m=De(t.date);return e.jsxs("button",{onClick:()=>ke(t.date),className:`
                    aspect-square min-h-[44px] p-1 rounded-lg text-sm transition-colors
                    ${t.isCurrentMonth?"text-foreground":"text-muted-foreground/40"}
                    ${m?"bg-primary text-primary-foreground font-bold":"hover:bg-muted"}
                  `,children:[e.jsx("div",{className:"text-xs font-medium mb-1",children:t.date.getDate()}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[t.events.slice(0,2).map((o,g)=>e.jsx("div",{onClick:y=>{y.stopPropagation(),W(o)},className:`h-1 rounded ${Y(o.type)}`,title:o.title},g)),t.events.length>2&&e.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["+",t.events.length-2]})]})]},i)})})]}),ee.length>0&&e.jsxs("div",{className:"mobile-card mt-4",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Heute - Termine & Events"}),e.jsx("div",{className:"space-y-2",children:ee.map(t=>e.jsx(ae,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{C(new Date(t.date.includes("T")?t.date.split("T")[0]:t.date)),W(t)},children:e.jsx(ne,{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:T("w-3 h-3 rounded-full mt-1 flex-shrink-0",Y(t.type))}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:t.title}),t.time&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx(q,{className:"w-3 h-3 inline mr-1"}),t.time]}),t.personName&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.personName})]})]})})},t.id))})]}),e.jsx(A,{open:ue,onOpenChange:S,children:e.jsxs($,{className:"!fixed !top-[50%] !left-[50%] !right-auto !bottom-auto !translate-x-[-50%] !translate-y-[-50%] !w-[85vw] !max-w-sm !max-h-[85vh] !rounded-3xl !m-0 !overflow-y-auto !shadow-2xl",children:[e.jsx(H,{className:"px-5 pt-5 pb-3 sticky top-0 bg-background z-10 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{className:"text-lg font-semibold",children:l?.toLocaleDateString("de-CH",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>S(!1),className:"h-8 w-8 rounded-full",children:e.jsx(V,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"space-y-4 px-5 pb-2",children:[e.jsxs("div",{className:"bg-muted/30 rounded-xl p-4 space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Wetter"]})}),X?e.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Lädt Wetterdaten..."}),U&&e.jsxs("div",{className:"text-xs text-red-500 mt-2",children:["Fehler: ",U.message]})]}):h?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[h.icon==="sun"&&e.jsx(Ke,{className:"w-6 h-6 text-yellow-500"}),h.icon==="cloud-sun"&&e.jsx(Ve,{className:"w-6 h-6 text-gray-500"}),h.icon==="cloud"&&e.jsx(le,{className:"w-6 h-6 text-gray-500"}),h.icon==="rain"&&e.jsx(qe,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsxs("span",{className:"text-2xl font-bold",children:[h.temperature,"°"]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"C"})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:h.condition})]})]}),(h.humidity!==void 0||h.windSpeed!==void 0)&&e.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground pt-2 border-t border-border/50",children:[h.windSpeed!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Je,{className:"w-3 h-3"}),e.jsxs("span",{children:[h.windSpeed," km/h"]})]}),h.humidity!==void 0&&e.jsx("div",{children:e.jsxs("span",{children:["Luftfeuchtigkeit: ",h.humidity,"%"]})})]})]}):e.jsx("div",{className:"text-xs text-muted-foreground text-center py-2",children:"Keine Wetterdaten verfügbar"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Termine & Events"}),_.length===0?e.jsxs("div",{className:"text-sm text-muted-foreground text-center py-3 bg-muted/30 rounded-lg",children:[e.jsx("p",{children:"Keine Events an diesem Tag"}),e.jsxs("p",{className:"text-xs mt-2 opacity-70",children:["Debug: ",d.length," Events geladen, ",l?`Datum: ${k(l)}`:"Kein Datum ausgewählt"]})]}):e.jsx("div",{className:"space-y-2",children:_.map(t=>e.jsx(ae,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{S(!1),W(t)},children:e.jsx(ne,{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:T("w-3 h-3 rounded-full mt-1 flex-shrink-0",Y(t.type))}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:t.title}),t.time&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx(q,{className:"w-3 h-3 inline mr-1"}),t.time]}),t.personName&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.personName})]})]})})},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Schnellaktionen"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(p,{variant:"outline",onClick:()=>{B(!0)},className:"h-auto py-3 flex flex-col items-center gap-2 rounded-xl",children:[e.jsx(Ze,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Termin erstellen"})]}),e.jsxs(p,{variant:"outline",onClick:()=>{I(!0)},className:"h-auto py-3 flex flex-col items-center gap-2 rounded-xl",children:[e.jsx(J,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Finanz-Eintrag"})]})]})]})]}),e.jsx(R,{className:"px-5 pb-3 pt-2 sticky bottom-0 bg-background border-t border-border",children:e.jsx(p,{variant:"default",onClick:()=>S(!1),className:"h-11 min-h-[44px] w-full rounded-xl text-sm font-medium",children:"Schließen"})})]})}),e.jsx(A,{open:me,onOpenChange:z,children:e.jsxs($,{className:"!fixed !top-[50%] !left-[50%] !right-auto !bottom-auto !translate-x-[-50%] !translate-y-[-50%] !w-[85vw] !max-w-sm !max-h-[85vh] !rounded-3xl !m-0 !overflow-y-auto !shadow-2xl",children:[e.jsxs(H,{className:"px-5 pt-5 pb-3 sticky top-0 bg-background z-10 border-b border-border relative",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>z(!1),className:"absolute right-2 top-2 h-8 w-8 rounded-full z-20",children:e.jsx(V,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-start gap-3 pr-8",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:T("w-4 h-4 rounded-full flex-shrink-0",Y(r?.type||""))}),e.jsxs(ie,{variant:"outline",className:"text-xs",children:[r?.type==="due"&&"Fällig",r?.type==="reminder"&&"Erinnerung",r?.type==="appointment"&&"Termin",r?.type==="work"&&"Arbeit",r?.type==="school"&&"Schule",r?.type==="hort"&&"Hort",!r?.type&&"Event"]})]}),e.jsx(O,{className:"text-lg font-semibold leading-tight",children:r?.title})]})})]}),r&&e.jsxs("div",{className:"space-y-4 px-5 pb-2",children:[e.jsxs("div",{className:"bg-muted/30 rounded-xl p-4 space-y-3",children:[r.date&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(oe,{className:"w-5 h-5 text-muted-foreground mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(E,{className:"text-xs text-muted-foreground block mb-1",children:"Datum"}),e.jsx("p",{className:"text-sm font-medium",children:new Date(r.date).toLocaleDateString("de-CH",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]})]}),r.time&&e.jsxs("div",{className:"flex items-start gap-3 pt-2 border-t border-border/50",children:[e.jsx(q,{className:"w-5 h-5 text-muted-foreground mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(E,{className:"text-xs text-muted-foreground block mb-1",children:"Uhrzeit"}),e.jsx("p",{className:"text-sm font-medium",children:r.time})]})]})]}),r.description&&e.jsxs("div",{className:"bg-muted/30 rounded-xl p-4",children:[e.jsx(E,{className:"text-xs text-muted-foreground block mb-2",children:"Beschreibung"}),e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:r.description})]}),(r.amount||r.personName||r.status)&&e.jsxs("div",{className:"space-y-2",children:[r.amount&&e.jsxs("div",{className:"flex items-center gap-3 bg-muted/30 rounded-xl p-4",children:[e.jsx(J,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(E,{className:"text-xs text-muted-foreground block mb-1",children:"Betrag"}),e.jsxs("p",{className:"text-sm font-semibold",children:["CHF ",(r.amount/100).toFixed(2)]})]})]}),r.personName&&e.jsxs("div",{className:"flex items-center gap-3 bg-muted/30 rounded-xl p-4",children:[e.jsx(de,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(E,{className:"text-xs text-muted-foreground block mb-1",children:"Person"}),e.jsx("p",{className:"text-sm font-medium",children:r.personName})]})]}),r.status&&e.jsxs("div",{className:"flex items-center gap-3 bg-muted/30 rounded-xl p-4",children:[e.jsx(Ge,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(E,{className:"text-xs text-muted-foreground block mb-1",children:"Status"}),e.jsx(ie,{variant:r.status==="paid"?"default":"secondary",className:"text-xs",children:r.status==="paid"?"Bezahlt":r.status==="pending"?"Ausstehend":r.status})]})]}),r.isOverdue&&e.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-950/20 rounded-xl p-4 border border-red-200 dark:border-red-800",children:[e.jsx(Qe,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:"Überfällig"})})]})]})]}),e.jsx(R,{className:"px-5 pb-3 pt-2 sticky bottom-0 bg-background border-t border-border",children:e.jsx(p,{variant:"default",onClick:()=>z(!1),className:"h-11 min-h-[44px] w-full rounded-xl text-sm font-medium",children:"Schließen"})})]})}),e.jsx(A,{open:xe,onOpenChange:B,children:e.jsxs($,{className:"!fixed !top-[50%] !left-[50%] !right-auto !bottom-auto !translate-x-[-50%] !translate-y-[-50%] !w-[85vw] !max-w-sm !max-h-fit !rounded-3xl !m-0 !overflow-visible !shadow-2xl",children:[e.jsx(H,{className:"px-5 pt-4 pb-2",children:e.jsx(O,{className:"text-lg font-semibold",children:"Termin erstellen"})}),e.jsxs("div",{className:"px-5 pb-2 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Titel"}),e.jsx("input",{type:"text",id:"reminder-title",placeholder:"z.B. Arzttermin",className:"w-full px-3 py-2 border border-border rounded-lg text-sm",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Datum"}),e.jsx("input",{type:"date",id:"reminder-date",defaultValue:l?k(l):"",className:"w-full px-3 py-2 border border-border rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Uhrzeit (optional)"}),e.jsx("input",{type:"time",id:"reminder-time",className:"w-full px-3 py-2 border border-border rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Notizen (optional)"}),e.jsx("textarea",{id:"reminder-notes",placeholder:"Weitere Details...",rows:2,className:"w-full px-3 py-2 border border-border rounded-lg text-sm resize-none"})]})]}),e.jsxs(R,{className:"px-5 pb-3 pt-2 gap-2",children:[e.jsx(p,{variant:"outline",onClick:()=>B(!1),className:"h-11 min-h-[44px] flex-1 rounded-xl text-sm font-medium",children:"Abbrechen"}),e.jsx(p,{variant:"default",onClick:async()=>{try{const t=document.getElementById("reminder-title"),i=document.getElementById("reminder-date"),m=document.getElementById("reminder-time"),o=document.getElementById("reminder-notes");if(!t.value.trim()){f.error("Bitte gib einen Titel ein");return}const g=new Date(i.value);if(m.value){const[y,x]=m.value.split(":");g.setHours(parseInt(y),parseInt(x))}else g.setHours(12,0);await Be({title:t.value.trim(),type:"termin",dueDate:g,isAllDay:!m.value,notes:o.value.trim()||null}),f.success("Termin erstellt"),B(!1),S(!1),await L(),l&&C(new Date(l))}catch(t){f.error(t.message||"Fehler beim Erstellen des Termins")}},className:"h-11 min-h-[44px] flex-1 rounded-xl text-sm font-medium",children:"Erstellen"})]})]})}),e.jsx(A,{open:he,onOpenChange:I,children:e.jsxs($,{className:"!fixed !top-[50%] !left-[50%] !right-auto !bottom-auto !translate-x-[-50%] !translate-y-[-50%] !w-[85vw] !max-w-sm !max-h-fit !rounded-3xl !m-0 !overflow-visible !shadow-2xl",children:[e.jsx(H,{className:"px-5 pt-4 pb-2",children:e.jsx(O,{className:"text-lg font-semibold",children:"Finanz-Eintrag erstellen"})}),e.jsxs("div",{className:"px-5 pb-2 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Beschreibung"}),e.jsx("input",{type:"text",id:"finance-description",placeholder:"z.B. Einkauf, Gehalt",className:"w-full px-3 py-2 border border-border rounded-lg text-sm",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Betrag (CHF)"}),e.jsx("input",{type:"number",id:"finance-amount",placeholder:"0.00",step:"0.01",className:"w-full px-3 py-2 border border-border rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Typ"}),e.jsxs("select",{id:"finance-type",className:"w-full px-3 py-2 border border-border rounded-lg text-sm",children:[e.jsx("option",{value:"einnahme",children:"Einnahme"}),e.jsx("option",{value:"ausgabe",children:"Ausgabe"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Datum"}),e.jsx("input",{type:"date",id:"finance-date",defaultValue:l?k(l):"",className:"w-full px-3 py-2 border border-border rounded-lg text-sm"})]})]}),e.jsxs(R,{className:"px-5 pb-3 pt-2 gap-2",children:[e.jsx(p,{variant:"outline",onClick:()=>I(!1),className:"h-11 min-h-[44px] flex-1 rounded-xl text-sm font-medium",children:"Abbrechen"}),e.jsx(p,{variant:"default",onClick:async()=>{try{const t=document.getElementById("finance-description"),i=document.getElementById("finance-amount"),m=document.getElementById("finance-type"),o=document.getElementById("finance-date");if(!t.value.trim()){f.error("Bitte gib eine Beschreibung ein");return}if(!i.value||parseFloat(i.value)<=0){f.error("Bitte gib einen gültigen Betrag ein");return}await Ie({notes:t.value.trim(),amount:Math.round(parseFloat(i.value)*100),type:m.value,date:new Date(o.value),category:"Sonstiges",currency:"CHF",isRecurring:!1}),f.success("Finanz-Eintrag erstellt"),I(!1),S(!1),await L()}catch(t){f.error(t.message||"Fehler beim Erstellen des Finanz-Eintrags")}},className:"h-11 min-h-[44px] flex-1 rounded-xl text-sm font-medium",children:"Erstellen"})]})]})})]})}export{ie as B,st as M,at as S,ht as a,P as d,xt as f,ut as p};
